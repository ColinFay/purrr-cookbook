<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>purrr cookbook</title>
  <meta name="description" content="A {purrr} cookbookdown.">
  <meta name="generator" content="bookdown 0.5.15 and GitBook 2.6.7">

  <meta property="og:title" content="purrr cookbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A {purrr} cookbookdown." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="purrr cookbook" />
  
  <meta name="twitter:description" content="A {purrr} cookbookdown." />
  

<meta name="author" content="Colin Fay">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="intro.html">
<link rel="next" href="webmining.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A purrr cookbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="how-to-read-this-book.html"><a href="how-to-read-this-book.html"><i class="fa fa-check"></i>How to read this book</a><ul>
<li class="chapter" data-level="" data-path="how-to-read-this-book.html"><a href="how-to-read-this-book.html#who-is-this-cookbook-for"><i class="fa fa-check"></i>Who is this cookbook for?</a></li>
<li class="chapter" data-level="" data-path="how-to-read-this-book.html"><a href="how-to-read-this-book.html#before-reading"><i class="fa fa-check"></i>Before reading</a></li>
<li class="chapter" data-level="" data-path="how-to-read-this-book.html"><a href="how-to-read-this-book.html#you-want-another-receipe"><i class="fa fa-check"></i>You want another receipe</a></li>
<li class="chapter" data-level="" data-path="how-to-read-this-book.html"><a href="how-to-read-this-book.html#you-want-to-share-receipe"><i class="fa fa-check"></i>You want to share receipe</a></li>
<li class="chapter" data-level="" data-path="how-to-read-this-book.html"><a href="how-to-read-this-book.html#what-to-do-if-you-find-a-typo"><i class="fa fa-check"></i>What to do if you find a typo</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> purrr basics</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#map-function"><i class="fa fa-check"></i><b>1.1</b> map function</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#i-want-to"><i class="fa fa-check"></i><b>1.1.1</b> I want to…</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#heres-how-to"><i class="fa fa-check"></i><b>1.1.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="1.1.3" data-path="intro.html"><a href="intro.html#ok-but-why"><i class="fa fa-check"></i><b>1.1.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="1.1.4" data-path="intro.html"><a href="intro.html#see-also"><i class="fa fa-check"></i><b>1.1.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#map_-functions"><i class="fa fa-check"></i><b>1.2</b> map_* functions</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#i-want-to-1"><i class="fa fa-check"></i><b>1.2.1</b> I want to…</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#heres-how-to-1"><i class="fa fa-check"></i><b>1.2.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#ok-but-why-1"><i class="fa fa-check"></i><b>1.2.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="1.2.4" data-path="intro.html"><a href="intro.html#see-also-1"><i class="fa fa-check"></i><b>1.2.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#mappers"><i class="fa fa-check"></i><b>1.3</b> Mappers</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#i-want-to-2"><i class="fa fa-check"></i><b>1.3.1</b> I want to…</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#heres-how-to-2"><i class="fa fa-check"></i><b>1.3.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#ok-but-why-2"><i class="fa fa-check"></i><b>1.3.3</b> Ok, but why?</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#map-on-2-elements"><i class="fa fa-check"></i><b>1.4</b> map on 2 elements</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#i-want-to-3"><i class="fa fa-check"></i><b>1.4.1</b> I want to…</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#heres-how-to-3"><i class="fa fa-check"></i><b>1.4.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="1.4.3" data-path="intro.html"><a href="intro.html#ok-but-why-3"><i class="fa fa-check"></i><b>1.4.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="1.4.4" data-path="intro.html"><a href="intro.html#see-also-2"><i class="fa fa-check"></i><b>1.4.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#map-on-more-elements"><i class="fa fa-check"></i><b>1.5</b> map on more elements</a><ul>
<li class="chapter" data-level="1.5.1" data-path="intro.html"><a href="intro.html#i-want-to-4"><i class="fa fa-check"></i><b>1.5.1</b> I want to…</a></li>
<li class="chapter" data-level="1.5.2" data-path="intro.html"><a href="intro.html#heres-how-to-4"><i class="fa fa-check"></i><b>1.5.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="1.5.3" data-path="intro.html"><a href="intro.html#ok-but-why-4"><i class="fa fa-check"></i><b>1.5.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="1.5.4" data-path="intro.html"><a href="intro.html#see-also-3"><i class="fa fa-check"></i><b>1.5.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#iteration-for-side-effect"><i class="fa fa-check"></i><b>1.6</b> Iteration for side effect</a><ul>
<li class="chapter" data-level="1.6.1" data-path="intro.html"><a href="intro.html#i-want-to-5"><i class="fa fa-check"></i><b>1.6.1</b> I want to…</a></li>
<li class="chapter" data-level="1.6.2" data-path="intro.html"><a href="intro.html#heres-how-to-5"><i class="fa fa-check"></i><b>1.6.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="1.6.3" data-path="intro.html"><a href="intro.html#ok-but-why-5"><i class="fa fa-check"></i><b>1.6.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="1.6.4" data-path="intro.html"><a href="intro.html#see-also-4"><i class="fa fa-check"></i><b>1.6.4</b> See also</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="stats.html"><a href="stats.html"><i class="fa fa-check"></i><b>2</b> Statistics</a><ul>
<li class="chapter" data-level="2.1" data-path="stats.html"><a href="stats.html#compute-the-mean"><i class="fa fa-check"></i><b>2.1</b> Compute the mean</a><ul>
<li class="chapter" data-level="2.1.1" data-path="stats.html"><a href="stats.html#i-want-to-6"><i class="fa fa-check"></i><b>2.1.1</b> I want to…</a></li>
<li class="chapter" data-level="2.1.2" data-path="stats.html"><a href="stats.html#heres-how-to-6"><i class="fa fa-check"></i><b>2.1.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="2.1.3" data-path="stats.html"><a href="stats.html#ok-but-why-6"><i class="fa fa-check"></i><b>2.1.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="2.1.4" data-path="stats.html"><a href="stats.html#see-also-5"><i class="fa fa-check"></i><b>2.1.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="stats.html"><a href="stats.html#running-a-shapiro-test"><i class="fa fa-check"></i><b>2.2</b> Running a shapiro test</a><ul>
<li class="chapter" data-level="2.2.1" data-path="stats.html"><a href="stats.html#i-want-to-7"><i class="fa fa-check"></i><b>2.2.1</b> I want to…</a></li>
<li class="chapter" data-level="2.2.2" data-path="stats.html"><a href="stats.html#heres-how-to-7"><i class="fa fa-check"></i><b>2.2.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="2.2.3" data-path="stats.html"><a href="stats.html#ok-but-why-7"><i class="fa fa-check"></i><b>2.2.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="2.2.4" data-path="stats.html"><a href="stats.html#see-also-6"><i class="fa fa-check"></i><b>2.2.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="stats.html"><a href="stats.html#test-only-numeric-columns"><i class="fa fa-check"></i><b>2.3</b> Test only numeric columns</a><ul>
<li class="chapter" data-level="2.3.1" data-path="stats.html"><a href="stats.html#i-want-to-8"><i class="fa fa-check"></i><b>2.3.1</b> I want to…</a></li>
<li class="chapter" data-level="2.3.2" data-path="stats.html"><a href="stats.html#heres-how-to-8"><i class="fa fa-check"></i><b>2.3.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="2.3.3" data-path="stats.html"><a href="stats.html#ok-but-why-8"><i class="fa fa-check"></i><b>2.3.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="2.3.4" data-path="stats.html"><a href="stats.html#see-also-7"><i class="fa fa-check"></i><b>2.3.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="stats.html"><a href="stats.html#cor.test"><i class="fa fa-check"></i><b>2.4</b> cor.test</a><ul>
<li class="chapter" data-level="2.4.1" data-path="stats.html"><a href="stats.html#i-want-to-9"><i class="fa fa-check"></i><b>2.4.1</b> I want to…</a></li>
<li class="chapter" data-level="2.4.2" data-path="stats.html"><a href="stats.html#heres-how-to-9"><i class="fa fa-check"></i><b>2.4.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="2.4.3" data-path="stats.html"><a href="stats.html#ok-but-why-9"><i class="fa fa-check"></i><b>2.4.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="2.4.4" data-path="stats.html"><a href="stats.html#see-also-8"><i class="fa fa-check"></i><b>2.4.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="stats.html"><a href="stats.html#linear-regression"><i class="fa fa-check"></i><b>2.5</b> Linear regression</a><ul>
<li class="chapter" data-level="2.5.1" data-path="stats.html"><a href="stats.html#i-want-to-10"><i class="fa fa-check"></i><b>2.5.1</b> I want to…</a></li>
<li class="chapter" data-level="2.5.2" data-path="stats.html"><a href="stats.html#heres-how-to-10"><i class="fa fa-check"></i><b>2.5.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="2.5.3" data-path="stats.html"><a href="stats.html#ok-but-why-10"><i class="fa fa-check"></i><b>2.5.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="2.5.4" data-path="stats.html"><a href="stats.html#see-also-9"><i class="fa fa-check"></i><b>2.5.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="stats.html"><a href="stats.html#significant-r.squared"><i class="fa fa-check"></i><b>2.6</b> significant r.squared</a><ul>
<li class="chapter" data-level="2.6.1" data-path="stats.html"><a href="stats.html#i-want-to-11"><i class="fa fa-check"></i><b>2.6.1</b> I want to…</a></li>
<li class="chapter" data-level="2.6.2" data-path="stats.html"><a href="stats.html#heres-how-to-11"><i class="fa fa-check"></i><b>2.6.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="2.6.3" data-path="stats.html"><a href="stats.html#ok-but-why-11"><i class="fa fa-check"></i><b>2.6.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="2.6.4" data-path="stats.html"><a href="stats.html#see-also-10"><i class="fa fa-check"></i><b>2.6.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="stats.html"><a href="stats.html#test-and-validation"><i class="fa fa-check"></i><b>2.7</b> test and validation</a><ul>
<li class="chapter" data-level="2.7.1" data-path="stats.html"><a href="stats.html#i-want-to-12"><i class="fa fa-check"></i><b>2.7.1</b> I want to…</a></li>
<li class="chapter" data-level="2.7.2" data-path="stats.html"><a href="stats.html#heres-how-to-12"><i class="fa fa-check"></i><b>2.7.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="2.7.3" data-path="stats.html"><a href="stats.html#ok-but-why-12"><i class="fa fa-check"></i><b>2.7.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="2.7.4" data-path="stats.html"><a href="stats.html#see-also-11"><i class="fa fa-check"></i><b>2.7.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="stats.html"><a href="stats.html#rpart"><i class="fa fa-check"></i><b>2.8</b> rpart</a><ul>
<li class="chapter" data-level="2.8.1" data-path="stats.html"><a href="stats.html#i-want-to-13"><i class="fa fa-check"></i><b>2.8.1</b> I want to…</a></li>
<li class="chapter" data-level="2.8.2" data-path="stats.html"><a href="stats.html#heres-how-to-13"><i class="fa fa-check"></i><b>2.8.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="2.8.3" data-path="stats.html"><a href="stats.html#ok-but-why-13"><i class="fa fa-check"></i><b>2.8.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="2.8.4" data-path="stats.html"><a href="stats.html#see-also-12"><i class="fa fa-check"></i><b>2.8.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="stats.html"><a href="stats.html#make-prediction"><i class="fa fa-check"></i><b>2.9</b> Make prediction</a><ul>
<li class="chapter" data-level="2.9.1" data-path="stats.html"><a href="stats.html#i-want-to-14"><i class="fa fa-check"></i><b>2.9.1</b> I want to…</a></li>
<li class="chapter" data-level="2.9.2" data-path="stats.html"><a href="stats.html#heres-how-to-14"><i class="fa fa-check"></i><b>2.9.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="2.9.3" data-path="stats.html"><a href="stats.html#ok-but-why-14"><i class="fa fa-check"></i><b>2.9.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="2.9.4" data-path="stats.html"><a href="stats.html#see-also-13"><i class="fa fa-check"></i><b>2.9.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="stats.html"><a href="stats.html#confusion-matrix"><i class="fa fa-check"></i><b>2.10</b> Confusion matrix</a><ul>
<li class="chapter" data-level="2.10.1" data-path="stats.html"><a href="stats.html#i-want-to-15"><i class="fa fa-check"></i><b>2.10.1</b> I want to…</a></li>
<li class="chapter" data-level="2.10.2" data-path="stats.html"><a href="stats.html#heres-how-to-15"><i class="fa fa-check"></i><b>2.10.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="2.10.3" data-path="stats.html"><a href="stats.html#ok-but-why-15"><i class="fa fa-check"></i><b>2.10.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="2.10.4" data-path="stats.html"><a href="stats.html#see-also-14"><i class="fa fa-check"></i><b>2.10.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="stats.html"><a href="stats.html#sensitivity-and-specificity"><i class="fa fa-check"></i><b>2.11</b> Sensitivity and Specificity</a><ul>
<li class="chapter" data-level="2.11.1" data-path="stats.html"><a href="stats.html#i-want-to-16"><i class="fa fa-check"></i><b>2.11.1</b> I want to…</a></li>
<li class="chapter" data-level="2.11.2" data-path="stats.html"><a href="stats.html#heres-how-to-16"><i class="fa fa-check"></i><b>2.11.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="2.11.3" data-path="stats.html"><a href="stats.html#ok-but-why-16"><i class="fa fa-check"></i><b>2.11.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="2.11.4" data-path="stats.html"><a href="stats.html#see-also-15"><i class="fa fa-check"></i><b>2.11.4</b> See also</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="webmining.html"><a href="webmining.html"><i class="fa fa-check"></i><b>3</b> Webmining</a><ul>
<li class="chapter" data-level="3.1" data-path="webmining.html"><a href="webmining.html#status-code"><i class="fa fa-check"></i><b>3.1</b> Status code</a><ul>
<li class="chapter" data-level="3.1.1" data-path="webmining.html"><a href="webmining.html#i-want-to-17"><i class="fa fa-check"></i><b>3.1.1</b> I want to…</a></li>
<li class="chapter" data-level="3.1.2" data-path="webmining.html"><a href="webmining.html#heres-how-to-17"><i class="fa fa-check"></i><b>3.1.2</b> Here’s how to</a></li>
<li class="chapter" data-level="3.1.3" data-path="webmining.html"><a href="webmining.html#ok-but-why-17"><i class="fa fa-check"></i><b>3.1.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="3.1.4" data-path="webmining.html"><a href="webmining.html#see-also-16"><i class="fa fa-check"></i><b>3.1.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="webmining.html"><a href="webmining.html#check-status-code"><i class="fa fa-check"></i><b>3.2</b> Check status code</a><ul>
<li class="chapter" data-level="3.2.1" data-path="webmining.html"><a href="webmining.html#i-want-to-18"><i class="fa fa-check"></i><b>3.2.1</b> I want to…</a></li>
<li class="chapter" data-level="3.2.2" data-path="webmining.html"><a href="webmining.html#heres-how-to-18"><i class="fa fa-check"></i><b>3.2.2</b> Here’s how to</a></li>
<li class="chapter" data-level="3.2.3" data-path="webmining.html"><a href="webmining.html#ok-but-why-18"><i class="fa fa-check"></i><b>3.2.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="3.2.4" data-path="webmining.html"><a href="webmining.html#see-also-17"><i class="fa fa-check"></i><b>3.2.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="webmining.html"><a href="webmining.html#scrape-a-list-of-urls-which-may-fail"><i class="fa fa-check"></i><b>3.3</b> Scrape a list of urls which may fail</a><ul>
<li class="chapter" data-level="3.3.1" data-path="webmining.html"><a href="webmining.html#i-want-to-19"><i class="fa fa-check"></i><b>3.3.1</b> I want to…</a></li>
<li class="chapter" data-level="3.3.2" data-path="webmining.html"><a href="webmining.html#heres-how-to-19"><i class="fa fa-check"></i><b>3.3.2</b> Here’s how to</a></li>
<li class="chapter" data-level="3.3.3" data-path="webmining.html"><a href="webmining.html#ok-but-why-19"><i class="fa fa-check"></i><b>3.3.3</b> Ok, but why</a></li>
<li class="chapter" data-level="3.3.4" data-path="webmining.html"><a href="webmining.html#see-also-18"><i class="fa fa-check"></i><b>3.3.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="webmining.html"><a href="webmining.html#json-xml"><i class="fa fa-check"></i><b>3.4</b> JSON / XML</a><ul>
<li class="chapter" data-level="3.4.1" data-path="webmining.html"><a href="webmining.html#i-want-to-20"><i class="fa fa-check"></i><b>3.4.1</b> I want to…</a></li>
<li class="chapter" data-level="3.4.2" data-path="webmining.html"><a href="webmining.html#heres-how-to-20"><i class="fa fa-check"></i><b>3.4.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="3.4.3" data-path="webmining.html"><a href="webmining.html#ok-but-why-20"><i class="fa fa-check"></i><b>3.4.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="3.4.4" data-path="webmining.html"><a href="webmining.html#see-also-19"><i class="fa fa-check"></i><b>3.4.4</b> See also</a></li>
<li class="chapter" data-level="3.4.5" data-path="webmining.html"><a href="webmining.html#i-want-to-21"><i class="fa fa-check"></i><b>3.4.5</b> I want to…</a></li>
<li class="chapter" data-level="3.4.6" data-path="webmining.html"><a href="webmining.html#heres-how-to-21"><i class="fa fa-check"></i><b>3.4.6</b> Here’s how to:</a></li>
<li class="chapter" data-level="3.4.7" data-path="webmining.html"><a href="webmining.html#ok-but-why-21"><i class="fa fa-check"></i><b>3.4.7</b> Ok, but why</a></li>
<li class="chapter" data-level="3.4.8" data-path="webmining.html"><a href="webmining.html#see-also-20"><i class="fa fa-check"></i><b>3.4.8</b> See also</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tm.html"><a href="tm.html"><i class="fa fa-check"></i><b>4</b> Text Mining</a><ul>
<li class="chapter" data-level="4.1" data-path="tm.html"><a href="tm.html#build-regex"><i class="fa fa-check"></i><b>4.1</b> Build regex</a><ul>
<li class="chapter" data-level="4.1.1" data-path="tm.html"><a href="tm.html#i-want-to-22"><i class="fa fa-check"></i><b>4.1.1</b> I want to…</a></li>
<li class="chapter" data-level="4.1.2" data-path="tm.html"><a href="tm.html#heres-how-to-22"><i class="fa fa-check"></i><b>4.1.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="4.1.3" data-path="tm.html"><a href="tm.html#ok-but-why-22"><i class="fa fa-check"></i><b>4.1.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="4.1.4" data-path="tm.html"><a href="tm.html#see-also-21"><i class="fa fa-check"></i><b>4.1.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="tm.html"><a href="tm.html#regex-extraction"><i class="fa fa-check"></i><b>4.2</b> Regex extraction</a><ul>
<li class="chapter" data-level="4.2.1" data-path="tm.html"><a href="tm.html#i-want-to-23"><i class="fa fa-check"></i><b>4.2.1</b> I want to…</a></li>
<li class="chapter" data-level="4.2.2" data-path="tm.html"><a href="tm.html#heres-how-to-23"><i class="fa fa-check"></i><b>4.2.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="4.2.3" data-path="tm.html"><a href="tm.html#ok-but-why-23"><i class="fa fa-check"></i><b>4.2.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="4.2.4" data-path="tm.html"><a href="tm.html#see-also-22"><i class="fa fa-check"></i><b>4.2.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="tm.html"><a href="tm.html#collapse-a-list-of-words"><i class="fa fa-check"></i><b>4.3</b> Collapse a list of words</a><ul>
<li class="chapter" data-level="4.3.1" data-path="tm.html"><a href="tm.html#i-want-to-24"><i class="fa fa-check"></i><b>4.3.1</b> I want to…</a></li>
<li class="chapter" data-level="4.3.2" data-path="tm.html"><a href="tm.html#heres-how-to-24"><i class="fa fa-check"></i><b>4.3.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="4.3.3" data-path="tm.html"><a href="tm.html#ok-but-why-24"><i class="fa fa-check"></i><b>4.3.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="4.3.4" data-path="tm.html"><a href="tm.html#see-also-23"><i class="fa fa-check"></i><b>4.3.4</b> See also</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="optim.html"><a href="optim.html"><i class="fa fa-check"></i><b>5</b> Code Optimisation</a><ul>
<li class="chapter" data-level="5.1" data-path="optim.html"><a href="optim.html#compose-functions"><i class="fa fa-check"></i><b>5.1</b> Compose functions</a><ul>
<li class="chapter" data-level="5.1.1" data-path="optim.html"><a href="optim.html#i-want-to-25"><i class="fa fa-check"></i><b>5.1.1</b> I want to…</a></li>
<li class="chapter" data-level="5.1.2" data-path="optim.html"><a href="optim.html#heres-how-to-25"><i class="fa fa-check"></i><b>5.1.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="5.1.3" data-path="optim.html"><a href="optim.html#ok-but-why-25"><i class="fa fa-check"></i><b>5.1.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="5.1.4" data-path="optim.html"><a href="optim.html#see-also-24"><i class="fa fa-check"></i><b>5.1.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="optim.html"><a href="optim.html#prefilled-functions"><i class="fa fa-check"></i><b>5.2</b> Prefilled functions</a><ul>
<li class="chapter" data-level="5.2.1" data-path="optim.html"><a href="optim.html#i-want-to-26"><i class="fa fa-check"></i><b>5.2.1</b> I want to…</a></li>
<li class="chapter" data-level="5.2.2" data-path="optim.html"><a href="optim.html#heres-how-to-26"><i class="fa fa-check"></i><b>5.2.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="5.2.3" data-path="optim.html"><a href="optim.html#ok-but-why-26"><i class="fa fa-check"></i><b>5.2.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="5.2.4" data-path="optim.html"><a href="optim.html#see-also-25"><i class="fa fa-check"></i><b>5.2.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="optim.html"><a href="optim.html#negate-a-function"><i class="fa fa-check"></i><b>5.3</b> Negate a function</a><ul>
<li class="chapter" data-level="5.3.1" data-path="optim.html"><a href="optim.html#i-want-to-27"><i class="fa fa-check"></i><b>5.3.1</b> I want to…</a></li>
<li class="chapter" data-level="5.3.2" data-path="optim.html"><a href="optim.html#heres-how-to-27"><i class="fa fa-check"></i><b>5.3.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="5.3.3" data-path="optim.html"><a href="optim.html#ok-but-why-27"><i class="fa fa-check"></i><b>5.3.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="5.3.4" data-path="optim.html"><a href="optim.html#see-also-26"><i class="fa fa-check"></i><b>5.3.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="optim.html"><a href="optim.html#negate-a-function-1"><i class="fa fa-check"></i><b>5.4</b> Negate a function</a><ul>
<li class="chapter" data-level="5.4.1" data-path="optim.html"><a href="optim.html#i-want-to-28"><i class="fa fa-check"></i><b>5.4.1</b> I want to…</a></li>
<li class="chapter" data-level="5.4.2" data-path="optim.html"><a href="optim.html#heres-how-to-28"><i class="fa fa-check"></i><b>5.4.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="5.4.3" data-path="optim.html"><a href="optim.html#ok-but-why-28"><i class="fa fa-check"></i><b>5.4.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="5.4.4" data-path="optim.html"><a href="optim.html#see-also-27"><i class="fa fa-check"></i><b>5.4.4</b> See also</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="wrangling.html"><a href="wrangling.html"><i class="fa fa-check"></i><b>6</b> Data Wrangling</a><ul>
<li class="chapter" data-level="6.1" data-path="wrangling.html"><a href="wrangling.html#read-csvs"><i class="fa fa-check"></i><b>6.1</b> Read csvs</a><ul>
<li class="chapter" data-level="6.1.1" data-path="wrangling.html"><a href="wrangling.html#i-want-to-29"><i class="fa fa-check"></i><b>6.1.1</b> I want to…</a></li>
<li class="chapter" data-level="6.1.2" data-path="wrangling.html"><a href="wrangling.html#heres-how-to-29"><i class="fa fa-check"></i><b>6.1.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="6.1.3" data-path="wrangling.html"><a href="wrangling.html#ok-but-why-29"><i class="fa fa-check"></i><b>6.1.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="6.1.4" data-path="wrangling.html"><a href="wrangling.html#see-also-28"><i class="fa fa-check"></i><b>6.1.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="wrangling.html"><a href="wrangling.html#remove-the-na"><i class="fa fa-check"></i><b>6.2</b> Remove the NA</a><ul>
<li class="chapter" data-level="6.2.1" data-path="wrangling.html"><a href="wrangling.html#i-want-to-30"><i class="fa fa-check"></i><b>6.2.1</b> I want to…</a></li>
<li class="chapter" data-level="6.2.2" data-path="wrangling.html"><a href="wrangling.html#heres-how-to-30"><i class="fa fa-check"></i><b>6.2.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="6.2.3" data-path="wrangling.html"><a href="wrangling.html#ok-but-why-30"><i class="fa fa-check"></i><b>6.2.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="6.2.4" data-path="wrangling.html"><a href="wrangling.html#see-also-29"><i class="fa fa-check"></i><b>6.2.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="wrangling.html"><a href="wrangling.html#list-append"><i class="fa fa-check"></i><b>6.3</b> List append</a><ul>
<li class="chapter" data-level="6.3.1" data-path="wrangling.html"><a href="wrangling.html#i-want-to-31"><i class="fa fa-check"></i><b>6.3.1</b> I want to…</a></li>
<li class="chapter" data-level="6.3.2" data-path="wrangling.html"><a href="wrangling.html#heres-how-to-31"><i class="fa fa-check"></i><b>6.3.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="6.3.3" data-path="wrangling.html"><a href="wrangling.html#ok-but-why-31"><i class="fa fa-check"></i><b>6.3.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="6.3.4" data-path="wrangling.html"><a href="wrangling.html#see-also-30"><i class="fa fa-check"></i><b>6.3.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="wrangling.html"><a href="wrangling.html#position-matching"><i class="fa fa-check"></i><b>6.4</b> Position matching</a><ul>
<li class="chapter" data-level="6.4.1" data-path="wrangling.html"><a href="wrangling.html#i-want-to-32"><i class="fa fa-check"></i><b>6.4.1</b> I want to…</a></li>
<li class="chapter" data-level="6.4.2" data-path="wrangling.html"><a href="wrangling.html#heres-how-to-32"><i class="fa fa-check"></i><b>6.4.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="6.4.3" data-path="wrangling.html"><a href="wrangling.html#ok-but-why-32"><i class="fa fa-check"></i><b>6.4.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="6.4.4" data-path="wrangling.html"><a href="wrangling.html#see-also-31"><i class="fa fa-check"></i><b>6.4.4</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="wrangling.html"><a href="wrangling.html#cut-a-list"><i class="fa fa-check"></i><b>6.5</b> Cut a list</a><ul>
<li class="chapter" data-level="6.5.1" data-path="wrangling.html"><a href="wrangling.html#i-want-to-33"><i class="fa fa-check"></i><b>6.5.1</b> I want to…</a></li>
<li class="chapter" data-level="6.5.2" data-path="wrangling.html"><a href="wrangling.html#heres-how-to-33"><i class="fa fa-check"></i><b>6.5.2</b> Here’s how to:</a></li>
<li class="chapter" data-level="6.5.3" data-path="wrangling.html"><a href="wrangling.html#ok-but-why-33"><i class="fa fa-check"></i><b>6.5.3</b> Ok, but why?</a></li>
<li class="chapter" data-level="6.5.4" data-path="wrangling.html"><a href="wrangling.html#see-also-32"><i class="fa fa-check"></i><b>6.5.4</b> See also</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://twitter.com/_ColinFay" target="blank">Written by Colin Fay</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Hosted on Github</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">purrr cookbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="stats" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Statistics</h1>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">2811</span>)</a></code></pre></div>
<div id="compute-the-mean" class="section level2">
<h2><span class="header-section-number">2.1</span> Compute the mean</h2>
<div id="i-want-to-6" class="section level3">
<h3><span class="header-section-number">2.1.1</span> I want to…</h3>
<p>Get the mean of vectors of unequal length.</p>
</div>
<div id="heres-how-to-6" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Here’s how to:</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">numbers &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">rnorm</span>(<span class="dv">10</span>), <span class="kw">rnorm</span>(<span class="dv">10</span>), <span class="kw">rnorm</span>(<span class="dv">1000</span>))</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">trim &lt;-<span class="st"> </span><span class="dv">20</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3">na_rm &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="kw">pmap_dbl</span>(<span class="kw">list</span>(numbers, trim, na_rm), <span class="op">~</span><span class="st"> </span><span class="kw">mean</span>(..<span class="dv">1</span>, ..<span class="dv">2</span>,..<span class="dv">3</span>))</a></code></pre></div>
<pre><code>## [1]  0.11880200 -0.20132631  0.01946699</code></pre>
</div>
<div id="ok-but-why-6" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Ok, but why?</h3>
<p><code>pmap</code> takes a list of list as an input, and send them to the function. In <code>.f</code>, you can refer to the list arguments with their position: here, <code>..1</code>, <code>..2</code> and <code>..3</code>.</p>
</div>
<div id="see-also-5" class="section level3">
<h3><span class="header-section-number">2.1.4</span> See also</h3>
<hr />
</div>
</div>
<div id="running-a-shapiro-test" class="section level2">
<h2><span class="header-section-number">2.2</span> Running a shapiro test</h2>
<p>Given the dataset <code>airquality</code>.</p>
<div id="i-want-to-7" class="section level3">
<h3><span class="header-section-number">2.2.1</span> I want to…</h3>
<p>Look for normality on all columns, and know the one which are normal:</p>
</div>
<div id="heres-how-to-7" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Here’s how to:</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">map</span>(airquality, shapiro.test) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">keep</span>(<span class="op">~</span><span class="st"> </span>.x<span class="op">$</span>p.value <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.05</span>)</a></code></pre></div>
<pre><code>## $Wind
## 
##  Shapiro-Wilk normality test
## 
## data:  .x[[i]]
## W = 0.98575, p-value = 0.1178</code></pre>
</div>
<div id="ok-but-why-7" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Ok, but why?</h3>
<p>In R, data.frame are <strong>lists of vectors of same length</strong>. So, you can apply a function the same way you would apply a function on any list. Here, we are mapping a <code>shapiro.test</code>, on all columns, and we <code>keep</code> only the elements with a <code>.x$p.value</code> which is more than 0.05.</p>
</div>
<div id="see-also-6" class="section level3">
<h3><span class="header-section-number">2.2.4</span> See also</h3>
<ul>
<li><a href="http://colinfay.me/purrr-statistics/">A Crazy Little Thing Called {purrr} - Part 6 : doing statistics</a></li>
</ul>
<hr />
</div>
</div>
<div id="test-only-numeric-columns" class="section level2">
<h2><span class="header-section-number">2.3</span> Test only numeric columns</h2>
<div id="i-want-to-8" class="section level3">
<h3><span class="header-section-number">2.3.1</span> I want to…</h3>
<p>Make sure I make my statistical test on numeric values.</p>
</div>
<div id="heres-how-to-8" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Here’s how to:</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">map_if</span>(<span class="dt">.x =</span> iris, <span class="dt">.p =</span> is.numeric, <span class="dt">.f =</span> shapiro.test)</a></code></pre></div>
<pre><code>## $Sepal.Length
## 
##  Shapiro-Wilk normality test
## 
## data:  .x[[i]]
## W = 0.97609, p-value = 0.01018
## 
## 
## $Sepal.Width
## 
##  Shapiro-Wilk normality test
## 
## data:  .x[[i]]
## W = 0.98492, p-value = 0.1012
## 
## 
## $Petal.Length
## 
##  Shapiro-Wilk normality test
## 
## data:  .x[[i]]
## W = 0.87627, p-value = 7.412e-10
## 
## 
## $Petal.Width
## 
##  Shapiro-Wilk normality test
## 
## data:  .x[[i]]
## W = 0.90183, p-value = 1.68e-08
## 
## 
## $Species
##   [1] setosa     setosa     setosa     setosa     setosa     setosa    
##   [7] setosa     setosa     setosa     setosa     setosa     setosa    
##  [13] setosa     setosa     setosa     setosa     setosa     setosa    
##  [19] setosa     setosa     setosa     setosa     setosa     setosa    
##  [25] setosa     setosa     setosa     setosa     setosa     setosa    
##  [31] setosa     setosa     setosa     setosa     setosa     setosa    
##  [37] setosa     setosa     setosa     setosa     setosa     setosa    
##  [43] setosa     setosa     setosa     setosa     setosa     setosa    
##  [49] setosa     setosa     versicolor versicolor versicolor versicolor
##  [55] versicolor versicolor versicolor versicolor versicolor versicolor
##  [61] versicolor versicolor versicolor versicolor versicolor versicolor
##  [67] versicolor versicolor versicolor versicolor versicolor versicolor
##  [73] versicolor versicolor versicolor versicolor versicolor versicolor
##  [79] versicolor versicolor versicolor versicolor versicolor versicolor
##  [85] versicolor versicolor versicolor versicolor versicolor versicolor
##  [91] versicolor versicolor versicolor versicolor versicolor versicolor
##  [97] versicolor versicolor versicolor versicolor virginica  virginica 
## [103] virginica  virginica  virginica  virginica  virginica  virginica 
## [109] virginica  virginica  virginica  virginica  virginica  virginica 
## [115] virginica  virginica  virginica  virginica  virginica  virginica 
## [121] virginica  virginica  virginica  virginica  virginica  virginica 
## [127] virginica  virginica  virginica  virginica  virginica  virginica 
## [133] virginica  virginica  virginica  virginica  virginica  virginica 
## [139] virginica  virginica  virginica  virginica  virginica  virginica 
## [145] virginica  virginica  virginica  virginica  virginica  virginica 
## Levels: setosa versicolor virginica</code></pre>
</div>
<div id="ok-but-why-8" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Ok, but why?</h3>
<p><code>map_if</code> runs <code>.f</code> only if the <code>.x</code> verifies the condition <code>.p</code>.</p>
</div>
<div id="see-also-7" class="section level3">
<h3><span class="header-section-number">2.3.4</span> See also</h3>
<ul>
<li><a href="http://colinfay.me/purrr-statistics/">A Crazy Little Thing Called {purrr} - Part 6 : doing statistics</a></li>
</ul>
<hr />
</div>
</div>
<div id="cor.test" class="section level2">
<h2><span class="header-section-number">2.4</span> cor.test</h2>
<div id="i-want-to-9" class="section level3">
<h3><span class="header-section-number">2.4.1</span> I want to…</h3>
<p>Make a bulk cor.test of all my variables.</p>
</div>
<div id="heres-how-to-9" class="section level3">
<h3><span class="header-section-number">2.4.2</span> Here’s how to:</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">library</span>(tidystringdist) <span class="co"># Works since v0.1.2 </span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">comb &lt;-<span class="st"> </span><span class="kw">tidy_comb_all</span>(<span class="kw">names</span>(airquality))</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="kw">pmap</span>(comb, <span class="op">~</span><span class="st"> </span><span class="kw">cor.test</span>(airquality[[.x]], airquality[[.y]])) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="st">  </span><span class="kw">map_df</span>(broom<span class="op">::</span>tidy) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="st">  </span><span class="kw">cbind</span>(comb, .) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="st">  </span><span class="kw">select</span>(V1<span class="op">:</span>parameter)</a></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">V1</th>
<th align="left">V2</th>
<th align="right">estimate</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
<th align="right">parameter</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Ozone</td>
<td align="left">Solar.R</td>
<td align="right">0.3483417</td>
<td align="right">3.8797948</td>
<td align="right">0.0001793</td>
<td align="right">109</td>
</tr>
<tr class="even">
<td align="left">Ozone</td>
<td align="left">Wind</td>
<td align="right">-0.6015465</td>
<td align="right">-8.0401299</td>
<td align="right">0.0000000</td>
<td align="right">114</td>
</tr>
<tr class="odd">
<td align="left">Ozone</td>
<td align="left">Temp</td>
<td align="right">0.6983603</td>
<td align="right">10.4177242</td>
<td align="right">0.0000000</td>
<td align="right">114</td>
</tr>
<tr class="even">
<td align="left">Ozone</td>
<td align="left">Month</td>
<td align="right">0.1645193</td>
<td align="right">1.7808517</td>
<td align="right">0.0776001</td>
<td align="right">114</td>
</tr>
<tr class="odd">
<td align="left">Ozone</td>
<td align="left">Day</td>
<td align="right">-0.0132256</td>
<td align="right">-0.1412236</td>
<td align="right">0.8879425</td>
<td align="right">114</td>
</tr>
<tr class="even">
<td align="left">Solar.R</td>
<td align="left">Wind</td>
<td align="right">-0.0567917</td>
<td align="right">-0.6826017</td>
<td align="right">0.4959552</td>
<td align="right">144</td>
</tr>
<tr class="odd">
<td align="left">Solar.R</td>
<td align="left">Temp</td>
<td align="right">0.2758403</td>
<td align="right">3.4436863</td>
<td align="right">0.0007518</td>
<td align="right">144</td>
</tr>
<tr class="even">
<td align="left">Solar.R</td>
<td align="left">Month</td>
<td align="right">-0.0753008</td>
<td align="right">-0.9061819</td>
<td align="right">0.3663534</td>
<td align="right">144</td>
</tr>
<tr class="odd">
<td align="left">Solar.R</td>
<td align="left">Day</td>
<td align="right">-0.1502750</td>
<td align="right">-1.8240128</td>
<td align="right">0.0702234</td>
<td align="right">144</td>
</tr>
<tr class="even">
<td align="left">Wind</td>
<td align="left">Temp</td>
<td align="right">-0.4579879</td>
<td align="right">-6.3308351</td>
<td align="right">0.0000000</td>
<td align="right">151</td>
</tr>
<tr class="odd">
<td align="left">Wind</td>
<td align="left">Month</td>
<td align="right">-0.1782926</td>
<td align="right">-2.2265711</td>
<td align="right">0.0274562</td>
<td align="right">151</td>
</tr>
<tr class="even">
<td align="left">Wind</td>
<td align="left">Day</td>
<td align="right">0.0271809</td>
<td align="right">0.3341280</td>
<td align="right">0.7387466</td>
<td align="right">151</td>
</tr>
<tr class="odd">
<td align="left">Temp</td>
<td align="left">Month</td>
<td align="right">0.4209473</td>
<td align="right">5.7025370</td>
<td align="right">0.0000001</td>
<td align="right">151</td>
</tr>
<tr class="even">
<td align="left">Temp</td>
<td align="left">Day</td>
<td align="right">-0.1305932</td>
<td align="right">-1.6186176</td>
<td align="right">0.1076164</td>
<td align="right">151</td>
</tr>
<tr class="odd">
<td align="left">Month</td>
<td align="left">Day</td>
<td align="right">-0.0079618</td>
<td align="right">-0.0978389</td>
<td align="right">0.9221900</td>
<td align="right">151</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="ok-but-why-9" class="section level3">
<h3><span class="header-section-number">2.4.3</span> Ok, but why?</h3>
<p><code>comb</code> is a table containing all combinations of the names of the columns. What we do is mapping a <code>cor.test</code> on all these combinations by extracting, each time, the column as a vector, with <code>airquality[[.x]]</code> and <code>airquality[[.y]]</code>.</p>
<p><code>pmap</code> allows to use a list as a signe input.</p>
</div>
<div id="see-also-8" class="section level3">
<h3><span class="header-section-number">2.4.4</span> See also</h3>
<ul>
<li><a href="http://colinfay.me/purrr-statistics/">A Crazy Little Thing Called {purrr} - Part 6 : doing statistics</a></li>
</ul>
<hr />
</div>
</div>
<div id="linear-regression" class="section level2">
<h2><span class="header-section-number">2.5</span> Linear regression</h2>
<div id="i-want-to-10" class="section level3">
<h3><span class="header-section-number">2.5.1</span> I want to…</h3>
<p>Get the r.squared of each of the possible lm of airquality combinations.</p>
</div>
<div id="heres-how-to-10" class="section level3">
<h3><span class="header-section-number">2.5.2</span> Here’s how to:</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">res &lt;-<span class="st"> </span><span class="kw">pmap</span>(comb, <span class="op">~</span><span class="st"> </span><span class="kw">lm</span>(airquality[[.x]] <span class="op">~</span><span class="st"> </span>airquality[[.y]]))</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">get_rsquared &lt;-<span class="st"> </span><span class="kw">compose</span>(<span class="kw">as_mapper</span>(<span class="op">~</span><span class="st"> </span>.x<span class="op">$</span>r.squared), summary)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="kw">map_dbl</span>(res, get_rsquared)</a></code></pre></div>
<pre><code>##  [1] 1.213419e-01 3.618582e-01 4.877072e-01 2.706660e-02 1.749177e-04
##  [6] 3.225293e-03 7.608786e-02 5.670205e-03 2.258257e-02 2.097529e-01
## [11] 3.178824e-02 7.388015e-04 1.771966e-01 1.705458e-02 6.338966e-05</code></pre>
</div>
<div id="ok-but-why-10" class="section level3">
<h3><span class="header-section-number">2.5.3</span> Ok, but why?</h3>
<p>We’re building a model of all combinations with <code>pmap</code>, just as before with <code>cor.test</code>.</p>
<p>Then, the <code>get_rsquared</code> function is a composition of extracting the r.squared of the summary of a lm result. <code>compose(x, y)</code> allows to build <code>x(y())</code>. Here, we are combining a mapper extracting the <code>r.squared</code> element out of the <code>summary()</code> of a <code>lm</code>.</p>
</div>
<div id="see-also-9" class="section level3">
<h3><span class="header-section-number">2.5.4</span> See also</h3>
<ul>
<li><a href="http://colinfay.me/purrr-statistics/">A Crazy Little Thing Called {purrr} - Part 6 : doing statistics</a></li>
</ul>
<hr />
</div>
</div>
<div id="significant-r.squared" class="section level2">
<h2><span class="header-section-number">2.6</span> significant r.squared</h2>
<div id="i-want-to-11" class="section level3">
<h3><span class="header-section-number">2.6.1</span> I want to…</h3>
<p>Know if some r.square are above O.5 :</p>
</div>
<div id="heres-how-to-11" class="section level3">
<h3><span class="header-section-number">2.6.2</span> Here’s how to:</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">res &lt;-<span class="st"> </span><span class="kw">pmap</span>(comb, <span class="op">~</span><span class="st"> </span><span class="kw">lm</span>(airquality[[.x]] <span class="op">~</span><span class="st"> </span>airquality[[.y]]))</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">get_rsquared &lt;-<span class="st"> </span><span class="kw">compose</span>(<span class="kw">as_mapper</span>(<span class="op">~</span><span class="st"> </span>.x<span class="op">$</span>r.squared), summary)</a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="kw">map_dbl</span>(res, get_rsquared) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">some</span>(<span class="op">~</span><span class="st"> </span>.x <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.5</span>)</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="ok-but-why-11" class="section level3">
<h3><span class="header-section-number">2.6.3</span> Ok, but why?</h3>
<p><code>some</code> checks if any of the input validate the condition.</p>
</div>
<div id="see-also-10" class="section level3">
<h3><span class="header-section-number">2.6.4</span> See also</h3>
<ul>
<li><a href="http://colinfay.me/purrr-statistics/">A Crazy Little Thing Called {purrr} - Part 6 : doing statistics</a></li>
</ul>
<hr />
</div>
</div>
<div id="test-and-validation" class="section level2">
<h2><span class="header-section-number">2.7</span> test and validation</h2>
<div id="i-want-to-12" class="section level3">
<h3><span class="header-section-number">2.7.1</span> I want to…</h3>
<p>Create 20 test and validation datasets.</p>
</div>
<div id="heres-how-to-12" class="section level3">
<h3><span class="header-section-number">2.7.2</span> Here’s how to:</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="co"># From http://biostat.mc.vanderbilt.edu/wiki/pub/Main/DataSets/titanic3.csv</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2">titanic &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;titanic.csv&quot;</span>)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">train &lt;-<span class="st"> </span><span class="kw">rerun</span>(<span class="dv">20</span>, <span class="kw">sample_frac</span>(titanic, <span class="dt">size =</span> <span class="fl">0.8</span>))</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">validation &lt;-<span class="st"> </span><span class="kw">map</span>(train, <span class="op">~</span><span class="st"> </span><span class="kw">anti_join</span>(titanic, .x))</a></code></pre></div>
</div>
<div id="ok-but-why-12" class="section level3">
<h3><span class="header-section-number">2.7.3</span> Ok, but why?</h3>
<p><code>rerun</code> runs the sampling 20 times. To obtain the 20 validation sets, we anti-join each elements of the train list with the original dataframe. That way, <code>train[1]</code> + <code>validation[1]</code> = <code>titanic</code>, <code>train[2]</code> + <code>validation[2]</code> = <code>titanic</code>, etc</p>
</div>
<div id="see-also-11" class="section level3">
<h3><span class="header-section-number">2.7.4</span> See also</h3>
<ul>
<li><a href="http://colinfay.me/purrr-statistics/">A Crazy Little Thing Called {purrr} - Part 6 : doing statistics</a></li>
</ul>
<hr />
</div>
</div>
<div id="rpart" class="section level2">
<h2><span class="header-section-number">2.8</span> rpart</h2>
<div id="i-want-to-13" class="section level3">
<h3><span class="header-section-number">2.8.1</span> I want to…</h3>
<p>Create 20 <code>rpart</code>, modeled on my 20 elements in the <code>test</code> list.</p>
</div>
<div id="heres-how-to-13" class="section level3">
<h3><span class="header-section-number">2.8.2</span> Here’s how to:</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">library</span>(rpart)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rpart_pimped &lt;-<span class="st"> </span><span class="kw">partial</span>(rpart, <span class="dt">formula =</span> survived <span class="op">~</span><span class="st"> </span>sex, <span class="dt">method =</span> <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">res &lt;-<span class="st"> </span><span class="kw">map</span>(train, rpart_pimped)</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">res[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>## n= 1047 
## 
## node), split, n, loss, yval, (yprob)
##       * denotes terminal node
## 
## 1) root 1047 408 0 (0.6103152 0.3896848)  
##   2) sex=male 666 127 0 (0.8093093 0.1906907) *
##   3) sex=female 381 100 1 (0.2624672 0.7375328) *</code></pre>
</div>
<div id="ok-but-why-13" class="section level3">
<h3><span class="header-section-number">2.8.3</span> Ok, but why?</h3>
<p><code>partial</code> allows to build a prefil function, which is then mapped on each element.</p>
</div>
<div id="see-also-12" class="section level3">
<h3><span class="header-section-number">2.8.4</span> See also</h3>
<ul>
<li><a href="http://colinfay.me/purrr-statistics/">A Crazy Little Thing Called {purrr} - Part 6 : doing statistics</a></li>
</ul>
<hr />
</div>
</div>
<div id="make-prediction" class="section level2">
<h2><span class="header-section-number">2.9</span> Make prediction</h2>
<div id="i-want-to-14" class="section level3">
<h3><span class="header-section-number">2.9.1</span> I want to…</h3>
<p>Make prediction based on my models</p>
</div>
<div id="heres-how-to-14" class="section level3">
<h3><span class="header-section-number">2.9.2</span> Here’s how to:</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">prediction &lt;-<span class="st"> </span><span class="kw">map2</span>(validation, res, <span class="op">~</span><span class="st"> </span><span class="kw">predict</span>(.y, .x, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>))</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">w_prediction &lt;-<span class="st"> </span><span class="kw">map2</span>(validation, prediction, <span class="op">~</span><span class="st"> </span><span class="kw">mutate</span>(.x, <span class="dt">prediction =</span> .y))</a></code></pre></div>
</div>
<div id="ok-but-why-14" class="section level3">
<h3><span class="header-section-number">2.9.3</span> Ok, but why?</h3>
<p><code>map2</code> allows to map on two arguments.</p>
</div>
<div id="see-also-13" class="section level3">
<h3><span class="header-section-number">2.9.4</span> See also</h3>
<ul>
<li><a href="http://colinfay.me/purrr-statistics/">A Crazy Little Thing Called {purrr} - Part 6 : doing statistics</a></li>
</ul>
<hr />
</div>
</div>
<div id="confusion-matrix" class="section level2">
<h2><span class="header-section-number">2.10</span> Confusion matrix</h2>
<div id="i-want-to-15" class="section level3">
<h3><span class="header-section-number">2.10.1</span> I want to…</h3>
<p>Create a conf matrix on all these results:</p>
</div>
<div id="heres-how-to-15" class="section level3">
<h3><span class="header-section-number">2.10.2</span> Here’s how to:</h3>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw">library</span>(caret)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">conf_mats &lt;-<span class="st"> </span><span class="kw">map</span>(w_prediction, <span class="op">~</span><span class="st"> </span><span class="kw">confusionMatrix</span>(.x<span class="op">$</span>prediction, .x<span class="op">$</span>survived))</a></code></pre></div>
</div>
<div id="ok-but-why-15" class="section level3">
<h3><span class="header-section-number">2.10.3</span> Ok, but why?</h3>
<p>You can use <code>.x</code> as many times as you want in <code>.f</code>.</p>
</div>
<div id="see-also-14" class="section level3">
<h3><span class="header-section-number">2.10.4</span> See also</h3>
<ul>
<li><a href="http://colinfay.me/purrr-statistics/">A Crazy Little Thing Called {purrr} - Part 6 : doing statistics</a></li>
</ul>
<hr />
</div>
</div>
<div id="sensitivity-and-specificity" class="section level2">
<h2><span class="header-section-number">2.11</span> Sensitivity and Specificity</h2>
<div id="i-want-to-16" class="section level3">
<h3><span class="header-section-number">2.11.1</span> I want to…</h3>
<p>Detect which models have a specificity above 0.7 and sensitivity above 0.85 (randomly chosen numbers).</p>
</div>
<div id="heres-how-to-16" class="section level3">
<h3><span class="header-section-number">2.11.2</span> Here’s how to:</h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">keep_index &lt;-<span class="st"> </span><span class="cf">function</span>(.x, .p, ...) {</a>
<a class="sourceLine" id="cb30-2" data-line-number="2">  sel &lt;-<span class="st"> </span>purrr<span class="op">:::</span><span class="kw">probe</span>(.x, .p, ...)</a>
<a class="sourceLine" id="cb30-3" data-line-number="3">  <span class="kw">which</span>(sel)</a>
<a class="sourceLine" id="cb30-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb30-5" data-line-number="5">sens &lt;-<span class="st"> </span><span class="kw">map_dbl</span>(conf_mats, <span class="op">~</span><span class="st"> </span>.x<span class="op">$</span>byClass[<span class="st">&quot;Sensitivity&quot;</span>]) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">keep_index</span>(<span class="op">~</span><span class="st"> </span>.x <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.85</span>)</a>
<a class="sourceLine" id="cb30-6" data-line-number="6">spec &lt;-<span class="st"> </span><span class="kw">map_dbl</span>(conf_mats, <span class="op">~</span><span class="st"> </span>.x<span class="op">$</span>byClass[<span class="st">&quot;Specificity&quot;</span>]) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">keep_index</span>(<span class="op">~</span><span class="st"> </span>.x <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.7</span>)</a>
<a class="sourceLine" id="cb30-7" data-line-number="7"><span class="kw">keep</span>(sens, <span class="kw">map_lgl</span>(sens, <span class="op">~</span><span class="st"> </span>.x <span class="op">%in%</span><span class="st"> </span>spec))</a></code></pre></div>
<pre><code>## [1] 2 5</code></pre>
</div>
<div id="ok-but-why-16" class="section level3">
<h3><span class="header-section-number">2.11.3</span> Ok, but why?</h3>
<p>We have created a function that returns the position of elements that validates a condition. <code>sens</code> is the vector containing the position with sensitivity above 0.85, <code>spec</code> the vector for specificity above 0.7.</p>
<p>Then, we pass to <code>keep</code> a vector of logical built with <code>map_lgl</code>. This vector tells if each elements of <code>sens</code> is or isn’t in <code>spec</code>.</p>
</div>
<div id="see-also-15" class="section level3">
<h3><span class="header-section-number">2.11.4</span> See also</h3>
<ul>
<li><a href="http://colinfay.me/purrr-statistics/">A Crazy Little Thing Called {purrr} - Part 6 : doing statistics</a></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="webmining.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
